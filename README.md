# shopify_commission_app

Pre-request:
Rails > 5.1.4 (This git project is using 6.0.3.2)
Ruby > 2.4.1 (This git project is using 2.6.6)
Node.js
XAMPP (Apache + MySQL)

Optional pre-request:
Heroku (Cloud Application Platform) (https://www.heroku.com/)
Ngrok (https://ngrok.com/)

^^ If you have a domain with SSL (https), you do not need to install optional pre-request

The shopify app is almost the same as https://github.com/Shopify/shopify_app#introduction

--------------------

Installation guide:

Install Heroku and Ngrok
Install XAMPP and start Apache and MySQL.

Put script_tag.js (in git project htdocs) to your htdocs in XAMPP.

Then, run ngrok and enter "ngrok http 80". It will generate a link with https that link forwards request to your localhost.

Next, follow youtube tutorial.

https://www.youtube.com/watch?v=yGxeoAHlQOg
Here is a youtube tutorial about how to build the app with Heroku.

After running command "rails generate shopify_app --api_key [YOUR_API_KEY] --secret_key [YOUR_SECRET_KEY]", go to \shopify_app_with_scripttags\config\initializers\shopify_app.rb and edit

```
ShopifyApp.configure do |config|
  config.scripttags = [
    {event:'onload', src: 'https://my-shopifyapp.herokuapp.com/fancy.js'},
    {event:'onload', src: ->(domain) { dynamic_tag_url(domain) } }
  ]
end

config.scope = '... , write_script_tags'
```

*The scr domain of the src is the link generated by Ngrok. For example: https://75f256df2b62.ngrok.io/script_tag.js*

Then, keep following the youtube tutorial.

After finishing the tutorial, go to Heroku -> your app -> settings -> Reveal Config Vars.
Add SHOPIFY_API_KEY as key, your api key as value.
Add SHOPIFY_API_SECRET as key, your secret key as value.

Next, import database to Mysql.

You can configure the setting of database connection in demo_db_connection.js.
Finally, launch Node.js server.

Please note that all the links need to be https or localhost. If you have a domain with SSL (for Node.js), configure the link in script_tag.js

After installation of the things above, you can enter https://www.yourshopifylink.myshopify.com/?user1 to confirm whether the database updates or not.
